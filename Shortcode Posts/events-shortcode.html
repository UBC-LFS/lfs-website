<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css"/>
<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js" async></script>
<style>
.next {
    float:right; 
    cursor:pointer;
}
#upcoming-events .read-more {
    margin-left: 0px;
}
#upcoming-events div.slick-list li.slick-slide {
    margin: 0px;
    display: table;
    outline: 0;
    border: 0;
}
#upcoming-events div.slick-list li.slick-slide div.event-vertical-center-wrap {
    display: table-cell;
    vertical-align: middle;
    overflow: hidden
}
#upcoming-events div.slick-list li.slick-slide .event-vertical-center-wrap .event-wrap {
    position: relative;
    overflow: hidden;
    height: 100%;
}

#upcoming-events div.slick-list li.slick-slide .event-vertical-center-wrap .event-wrap .event-hover {
    /* not sure: this element responds to element with position relative, even if element is not direct parent */
    position: absolute;
    top: 90%;
    left: 0px;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: rgba(0, 0, 0, 0.35);
    opacity: 0;
    transition: opacity .4s;
    text-decoration: none;
    opacity: 1;
    animation: hideEventDetails 0.25s;
    animation-timing-function: ease-out;
}
#upcoming-events div.slick-list li.slick-slide .event-vertical-center-wrap .event-wrap:hover .event-hover {
    height: 100%;
    top: 0%;
    background-color: rgba(0, 0, 0, 0.45);
    animation: showEventDetails 0.25s;
    animation-timing-function: ease-out;
}
@keyframes hideEventDetails {
    from {
        height: 100%;
        top: 0%;
        background-color: rgba(0, 0, 0, 0.45);
    }
    to {
        height: 10%;
        top: 90%;
        background-color: rgba(0, 0, 0, 0.35);
    }
}
@keyframes showEventDetails {
    from {
        height: 10%;
        top: 90%;
        background-color: rgba(0, 0, 0, 0.35);
    }
    to {
        height: 100%;
        top: 0%;
        background-color: rgba(0, 0, 0, 0.45);
    }
}
#upcoming-events .event-wrap a.event-link {
    position: absolute;
    top: 0%;
    height: 100%;
    width: 100%;
    text-decoration: none;
    cursor: pointer;
}
#upcoming-events div.slick-list li.slick-slide .event-wrap > .event-image {
    overflow: hidden;
}
#upcoming-events div.slick-list li.slick-slide .event-wrap > .event-image > img {
    position: relative;
    transition: transform .4s;
}
#upcoming-events div.slick-list li.slick-slide .event-wrap:hover > .event-image > img {
    transform: scale(1.1);
}
#upcoming-events .slick-list .slick-slide .event-wrap .event-hover p {
    color: white;
    text-align: center;
    margin: 0px;
    position: relative;
}
#upcoming-events .event-wrap .event-hover .event-text-wrap {
    height: 85%;
    max-height: 85%;
}

#upcoming-events .event-wrap .event-title {
    position: relative;
    top: 0%;
    height: 11.76%;
}
#upcoming-events .event-wrap .event-title p {
    position: absolute;
    width: 100%;
    top: 50%;
    transform: translate(0%, -50%);
    line-height: 24px;
    font-size: 30px;
}
#upcoming-events .event-hover{
    overflow: hidden;
    height: 10%;
}
#upcoming-events .event-wrap .event-hover .event-date,
#upcoming-events .event-wrap .event-hover .event-description
{
    opacity: 0;
    animation: hideDetails 0.25s;
    animation-timing-function: ease-out;
}
#upcoming-events .event-wrap:hover .event-hover .event-date,
#upcoming-events .event-wrap:hover .event-hover .event-description
{
    display: block;
    opacity: 1;
    animation: showDetails 0.5s;
    animation-timing-function: ease-out;
}
@keyframes hideDetails {
    0% {
        opacity: 1;
    }
    80% {
        opacity: 0;
    }
    100% {
        opacity: 0;
    }
}
@keyframes showDetails {
    0% {
        opacity: 0;
    }
    40% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
#upcoming-events .event-wrap .event-view-position {
    position: absolute;
    height: 15%;
    bottom: 0%;
    width: 100%;
    display: none;
    z-index: -1;
}
#upcoming-events .event-wrap:hover .event-view-position {
    display: block;
    z-index: 1;
    animation: buttonsTest 0.5s;
    animation-timing-function: ease-out;
}
@keyframes buttonsTest {
    0%{
        z-index: -1;
    }
    50% {
        z-index: -1;
    }
    100% {
        z-index: 1;
    }
}
#upcoming-events .event-wrap .event-view-position .event-view-button {
    border: 2px solid white;
    border-radius: 5px;
    width: 20%;
    margin: 0 auto;
    text-align: center;
    background-color: #2f5d7c;
    opacity: 0;
    animation: hideEventButton 0.25s;
    animation-timing-function: ease-out;
}
#upcoming-events .event-wrap:hover .event-view-position .event-view-button {
    opacity: 1;
    animation: showEventButton 0.5s;
    animation-timing-function: ease-out;
}
@keyframes hideEventButton {
    0% {
        opacity: 1;
    }
    80% {
        opacity: 0;
    }
    100% {
        opacity: 0;
    }
}
@keyframes showEventButton {
    0% {
        opacity: 0;
    }
    50% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
#upcoming-events .event-wrap .event-view-position .event-view-button a.event-button-link {
    color: white;
    text-decoration: none;
    font-size: 160%;
    vertical-align: middle;
    outline: 0;
    border: 0;
}
/* event arrow */
#upcoming-events #event-slider {
    padding: 0px 34px;
}
#event-slider {
    position: relative;
}
#event-slider .eventArrow {
    position: absolute;
    top: 0px;
    height: 100%;
    width: 34px;
    background-color: white;
}
#event-slider .event-prev-wrap {
    left: 0px;
}
#event-slider .event-next-wrap {
    right: 2px;
}
#event-slider .eventArrow p {
    font-size: 85px;
    margin: 0px;
    width: 30px;
    height: 50px;
    line-height: 35px;
    position: absolute;
    top: 50%;
    -ms-transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    -webkit-transform: translateY(-50%);
    transform: translateY(-50%);
    cursor: pointer;
    overflow: hidden;
}
/* event prev button hover */
#event-slider .eventArrow p.event-prev {
    padding-left: 4px;
    padding-right: 0px;
    color: #A8A8A8;
    animation: removeeventarrowshiftleft 0.4s;
    animation-timing-function: ease-out;
}
#event-slider .eventArrow p.event-prev:hover {
    padding-left: 0px;
    padding-right: 4px;
    color: #0680a6;
    animation: eventarrowshiftleft 0.4s;
    animation-timing-function: ease-out;
}
/* active effect should be after hover? */
#event-slider .eventArrow p.event-prev:active {
    color: #2f5d7c;
}
@keyframes eventarrowshiftleft {
    from {
        padding-left: 4px;
        padding-right: 0px;
        color: #A8A8A8;
    }
    to {
        padding-left: 0px;
        padding-right: 4px;
        color: #0680a6;
    }
}
@keyframes removeeventarrowshiftleft {
    from {
        padding-left: 0px;
        padding-right: 4px;
        color: #0680a6;
    }
    to {
        padding-left: 4px;
        padding-right: 0px;
        color: #A8A8A8;
    }
}
/* event next button hover */
#event-slider .eventArrow p.event-next {
    padding-left: 0px;
    padding-right: 4px;
    color: #A8A8A8;
    animation: removeeventarrowshiftright 0.4s;
    animation-timing-function: ease-out;
}
#event-slider .eventArrow p.event-next:hover {
    padding-left: 4px;
    padding-right: 0px;
    color: #0680a6;
    animation: eventarrowshiftright 0.4s;
    animation-timing-function: ease-out;
}
#event-slider .eventArrow p.event-next:active {
    color: #2f5d7c;
}
@keyframes eventarrowshiftright {
    from {
        padding-left: 0px;
        padding-right: 4px;
        color: #A8A8A8;
    }
    to {
        padding-left: 4px;
        padding-right: 0px;
        color: #0680a6;
    }
}
@keyframes removeeventarrowshiftright {
    from {
        padding-left: 4px;
        padding-right: 0px;
        color: #0680a6;
    }
    to {
        padding-left: 0px;
        padding-right: 4px;
        color: #A8A8A8;
    }
}
.eo-events {
     margin-left:0;
}
</style>
<div class="span12 no-margin-left" id="upcoming-events">
    <h2>Upcoming Events</h2>
    <div id="event-slider">
        <!--add in showpastevents=false below to show only upcoming events-->
        [eo_events ]
            <div class="event-vertical-center-wrap">
                <div class="event-wrap">
                    <div class="event-image">%event_thumbnail{medium}%</div>
                    <a href="%event_url%" class="event-link-copy"></a>
                    <a href="%event_url%" class="event-link">
                        <div class="event-hover">
                            <div class="event-text-wrap">
                                <div class="event-title">
                                    <p>%event_title%</p>
                                </div>
                                <div class="event-date">
                                    <p>%start{jS M Y}% at %start{g:i:a}%</p>
                                </div>
                                <div class="event-description">
                                    <p>%event_content%
                                    </p>
                                </div>
                            </div>
                        </div>
                    </a>
                    <div class="event-view-position">
                        <div class="event-view-button">
                            <a href="%event_url%" class="event-button-link">
                                View
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        [/eo_events]
        <div class="event-prev-wrap eventArrow"><p class="event-prev">&lsaquo;</p></div>
        <div class="event-next-wrap eventArrow"><p class="event-next">&rsaquo;</p></div>
    </div>
 <div class="span12 read-more">
        <a class="btn explore-more" style="margin-right:0;" href="http://lfs-ps.sites.olt.ubc.ca/events/" title="Read more stories of the people in the Faculty of Land and Food Systems">
            <span>SEE CALENDAR OF EVENTS <i class="icon-angle-right"></i></span>
        </a>
    </div>
</div>
<script>
[].forEach.call(document.getElementsByClassName('eo-events-shortcode'), function(x) {
    x.className += ' events';
})
</script>
<script>
jQuery(document).ready(function ($) {
    $('.events').slick({
        slide: 'li',
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 1,
        arrows: true,
        prevArrow: $('.event-prev'),
        nextArrow: $('.event-next'),
        responsive: [
            {
                breakpoint: 1024,
                settings: {
                    arrows: false,
                    centerMode: true,
                    centerPadding: '0px',
                    slidesToShow: 3
                }
            },
            {
                breakpoint: 769,
                settings: {
                    arrows: false,
                    centerMode: true,
                    centerPadding: '0px',
                    slidesToShow: 2
                }
            },
            {
                breakpoint: 481,
                settings: {
                    arrows: false,
                    centerMode: true,
                    centerPadding: '0px',
                    slidesToShow: 1
                }
            }
        ]
    });
    function eventsTouchEvents() {
        var event_link_remove = false;
        $('#upcoming-events .event-wrap').on('click touchstart', function(event){
            var event_link_copy = $(this).children('a.event-link-copy').attr('href');
            if (event.type === 'touchstart')
            {
                $(this).children('a.event-link').removeAttr('href');
                event_link_remove = true;
            }
            if (event.type === 'click')
            {
                if (event_link_remove === false)
                {
                    $(this).children('a.event-link').attr('href', event_link_copy);
                }
                event_link_remove = false;
            }
        });
    }
    eventsTouchEvents();
    // Setting up links
    function setupSlickSlider() {
        [].forEach.call($(".slider-wrap .slick-slide"), function(item,index,array){
            var slickSliderLink = $(item).children("a").eq(0).attr("href");
            $(item).children("a").eq(1).attr("href", slickSliderLink);
        })
    }
    setupSlickSlider();
})
</script>